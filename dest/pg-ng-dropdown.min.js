"use strict";!function(){function dropdownDirective($timeout,$document){function compile($element,attrs){return attrs.value=attrs.value||0,attrs.textProperty=attrs.textProperty||"text",attrs.imageProperty=attrs.imagetProperty||"image",{post:postLink}}function controller($scope){function selectOption(_index){if(_index!==parseInt($scope.value)){var _pastSelected=$scope.value;_index=parseInt(_index),$scope.value=_index,$scope.data[_index].selected=!0,$scope.data[_pastSelected]&&delete $scope.data[_pastSelected].selected,$scope.onchange(),$scope.$broadcast("option-selected",{index:_index,pastIndex:_pastSelected})}}function toggle(){$scope.opened?($scope.opened=!1,$scope.$broadcast("close-dropdown")):($scope.opened=!0,$scope.$broadcast("open-dropdown"))}function close(){$scope.opened=!1,$scope.$broadcast("close-dropdown")}$scope.opened=!1,$scope.selectOption=selectOption,$scope.close=close,$scope.toggle=toggle,"number"==typeof $scope.value&&($scope.data[$scope.value].selected=!0)}function postLink($scope,$element,attrs){function select($evt,data){options.eq(data.index).addClass(selectedClass),options.eq(data.pastIndex).removeClass(selectedClass)}function open(){$element.addClass(openedClass)}function close(){$element.removeClass(openedClass)}function elementClick(evt){evt.stopPropagation()}function destroy(){$document.off("click")}{var options,openedClass="opened",selectedClass="selected";Math.round(1e3*Math.random())}if($scope.openedClass)var openedClass=$scope.openedClass;if($scope.selectedClass)var selectedClass=$scope.selectedClass;$scope.$on("open-dropdown",open),$scope.$on("close-dropdown",close),$scope.$on("option-selected",select),$scope.$on("option-selected",$scope.close),$scope.$on("$destroy",destroy),$element.on("click",elementClick),$document.on("click",$scope.close),$timeout(function(){options=$element.find("li"),options.eq($scope.value).addClass(selectedClass)})}var template=['<div class="pg-dropdown">','<div data-ng-click="toggle()" class="current-selected-option">',"<i data-ng-if=\"image == 'true'\" data-ng-style=\"{'background-image': 'url('+(data[value][imageProperty])+')'}\">","</i>",'<span data-ng-bind="data[value][textProperty] || value">',"</span>",'<div class="arrow-wrapper">','<div class="arrow ss-icon ss-standard ss-navigatedown"></div>',"</div>","</div>",'<ul class="dropdown-content">','<li data-ng-click="selectOption($index)" data-ng-repeat="option in data" title="{{option[textProperty]}}" >',"<i data-ng-if=\"image == 'true'\" data-ng-style=\"{'background-image': 'url('+(option[imageProperty])+')'}\">","</i>",'<span data-ng-bind="option[textProperty]" data-t="{{option[textProperty]}}" data-tt="{{option}}" data-ttt="{{textProperty}}">',"</span>","</li>","</ul>","</div>"].join(""),directive={scope:{data:"=options",image:"@imageOptions",imageProperty:"@",value:"@selected",textProperty:"@",openedClass:"@",selectedClass:"@",onchange:"&"},restrict:"AEC",compile:compile,controller:controller,replace:!0,template:template};return directive}angular.module("pg-ng-dropdown",[]).directive("pgNgDropdown",dropdownDirective),dropdownDirective.$inject=["$timeout","$document"]}();